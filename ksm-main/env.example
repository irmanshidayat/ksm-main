
# MySQL Database Configuration

DB_HOST=localhost
DB_PORT=3306
DB_NAME=KSM_main
DB_USER=root
DB_PASSWORD=

# Database URL untuk SQLAlchemy
# Development (XAMPP): mysql://root:@localhost:3306/KSM_main
# Production (Docker): mysql://root:password@mysql-prod:3306/KSM_main (internal di Docker)
DATABASE_URL=mysql://root:@localhost:3306/KSM_main

# =============================================================================
# TASK MANAGEMENT CONFIGURATION
# =============================================================================

TASK_MAX_ATTACHMENT_SIZE_MB=5
TASK_ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,docx,xlsx
TASK_NOTIFICATION_EMAIL_ENABLED=true

# =============================================================================
# QDRANT CONFIGURATION
# =============================================================================

QDRANT_URL=https://your-qdrant-cluster-id.europe-west3-0.gcp.cloud.qdrant.io:6333
QDRANT_API_KEY=your-qdrant-api-key-here

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================

EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536
EMBEDDING_BATCH_SIZE=100
EMBEDDING_MAX_RETRIES=3
EMBEDDING_TIMEOUT=30
EMBEDDING_CACHE_MAX_SIZE=1000
EMBEDDING_CACHE_TTL=3600

# Qdrant Vector Configuration
QDRANT_VECTOR_SIZE=1536
QDRANT_BATCH_SIZE=100
QDRANT_COLLECTION_PREFIX=KSM

# Chunking Configuration
CHUNK_SIZE=800
CHUNK_OVERLAP=100

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Configuration
# Development (Lokal): REDIS_URL=redis://localhost:6379/0
# Production (Docker): REDIS_URL=redis://redis-prod:6379/0
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# =============================================================================
# JWT CONFIGURATION
# =============================================================================

# JWT Secret Key (ganti dengan secret key yang aman)
JWT_SECRET_KEY=KSM-jwt-secret-key-2024-super-secure
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=2592000

# =============================================================================
# API KEYS
# =============================================================================

# OpenAI API Key
OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# OpenRouter API Key (untuk Agent AI)
OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key-here

# Telegram Bot Token
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here

# KSM API Key (untuk komunikasi antar service)
KSM_API_KEY=your-ksm-api-key-here

# Ngrok Auth Token (untuk webhook development)
NGROK_AUTH_TOKEN=your-ngrok-auth-token-here

# =============================================================================
# COMPANY CONFIGURATION
# =============================================================================

# Default Company ID
DEFAULT_COMPANY_ID=PT. Kian Santang Muliatama

# =============================================================================
# FLASK CONFIGURATION
# =============================================================================

# Flask Environment - Auto-adjusted berdasarkan environment
# Docker: FLASK_ENV=production, FLASK_DEBUG=False
# Local:  FLASK_ENV=development, FLASK_DEBUG=True
FLASK_ENV=development
FLASK_DEBUG=True
FLASK_APP=app.py
SECRET_KEY=your_secret_key_here

# =============================================================================
# AGENT AI CONFIGURATION
# =============================================================================

# Agent AI URL - Auto-adjusted berdasarkan environment
# Docker: http://agent-ai-prod:5000
# Local:  http://localhost:5000
AGENT_AI_URL=http://localhost:5000
AGENT_AI_BASE_URL=http://localhost:5000
AGENT_AI_API_KEY=KSM_api_key_2ptybn
AGENT_AI_REPORT_ENDPOINT=/api/report/daily-task

# =============================================================================
# TELEGRAM RAG CONFIGURATION
# =============================================================================

TELEGRAM_RAG_TOP_K=8
TELEGRAM_RAG_SIMILARITY_THRESHOLD=0.3
TELEGRAM_RAG_MAX_CONTEXT=8000
RAG_SIMILARITY_THRESHOLD=0.3
TELEGRAM_RAG_CACHE_TTL=1800
TELEGRAM_RESPONSE_CACHE_TTL=300
TELEGRAM_ENABLE_RAG_FALLBACK=true
TELEGRAM_ENABLE_AGENT_AI_FALLBACK=true

# =============================================================================
# DAILY TASK NOTIFICATION CONFIGURATION
# =============================================================================

TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here
TELEGRAM_DEFAULT_CHAT_ID=your-telegram-chat-id-here
ADMIN_ALERT_CHAT_ID=your-admin-alert-chat-id-here
TIMEZONE=Asia/Jakarta
SCHEDULER_ENABLED=true
DAILY_REPORT_TIME=11:34
REPORT_ENABLED=true
REPORT_FREQUENCY=daily
REPORT_WEEKDAYS_ONLY=true
ERROR_NOTIFICATION_ENABLED=true
ERROR_NOTIFICATION_METHOD=telegram

# =============================================================================
# REMIND EXP DOCS CONFIGURATION
# =============================================================================

REMIND_EXP_NOTIFICATIONS_ENABLED=true
REMIND_EXP_DAYS_AHEAD=30
REMIND_EXP_URGENT_DAYS=7
REMIND_EXP_NOTIFICATION_TIME=11:35
REMIND_EXP_NOTIFICATION_TYPES=reminder,urgent,statistics,bulk_import
REMIND_EXP_MESSAGE_FORMAT=markdown
REMIND_EXP_RETRY_ATTEMPTS=3
REMIND_EXP_RETRY_DELAY=5
TELEGRAM_SETTINGS_TABLE=telegram_settings
REMIND_EXP_SCHEDULER_ENABLED=true
REMIND_EXP_SCHEDULER_TIMEZONE=Asia/Jakarta
REMIND_EXP_NOTIFICATION_FREQUENCY=daily
REMIND_EXP_WEEKDAYS_ONLY=true
REMIND_EXP_AUTO_NOTIFY_CREATE=true
REMIND_EXP_AUTO_NOTIFY_BULK_IMPORT=true
REMIND_EXP_AUTO_NOTIFY_UPDATE=false
REMIND_EXP_AUTO_NOTIFY_DELETE=false

# =============================================================================
# AI MODEL CONFIGURATION
# =============================================================================

AI_PROVIDER=openrouter
OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
DEFAULT_TEXT_MODEL=google/gemini-2.5-flash-preview-09-2025
DEFAULT_EMBEDDINGS_MODEL=google/gemini-2.5-flash-preview-09-2025
DEFAULT_FALLBACK_MODEL=google/gemini-2.5-flash-preview-09-2025
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=2000
AI_TOP_P=0.9

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Level - Auto-adjusted berdasarkan environment
# Docker: LOG_LEVEL=INFO
# Local:  LOG_LEVEL=DEBUG
LOG_LEVEL=DEBUG

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================

# Development Mode
DEVELOPMENT_MODE=true

# Hot Reload
HOT_RELOAD=true

# Debug Mode
DEBUG_MODE=true

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# CORS Origins - Auto-adjusted berdasarkan environment
# Docker: http://localhost:3002,http://localhost:8001,http://localhost:5001,https://report.ptkiansatang.com
# Local:  http://localhost:3000,http://localhost:3004,http://localhost:8000,http://localhost:5000
CORS_ORIGINS=http://localhost:3000,http://localhost:3004,http://localhost:8000,http://localhost:5000

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================

# Upload Directory
UPLOAD_FOLDER=uploads

# Max File Size (dalam bytes)
MAX_CONTENT_LENGTH=16777216

# Allowed Extensions
ALLOWED_EXTENSIONS=txt,pdf,png,jpg,jpeg,gif,doc,docx,xls,xlsx

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

FROM_NAME=KSM Procurement System
EMAIL_DOMAIN_MAX_CONFIGS_PER_USER=5
EMAIL_DOMAIN_TLS_INSECURE=false

# =============================================================================
# GMAIL API CONFIGURATION
# =============================================================================

GMAIL_CLIENT_ID=your_google_client_id_here
GMAIL_CLIENT_SECRET=your_google_client_secret_here
# Redirect URI - Auto-adjusted berdasarkan environment
# Docker: http://localhost:3002/request-pembelian/auth/gmail/callback
# Local:  http://localhost:3000/request-pembelian/auth/gmail/callback
GMAIL_REDIRECT_URI=http://localhost:3000/request-pembelian/auth/gmail/callback
GMAIL_SCOPES=https://www.googleapis.com/auth/gmail.send,https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/userinfo.profile
GMAIL_ENABLED=true
GMAIL_TIMEOUT=30
GMAIL_RETRY_ATTEMPTS=3

# =============================================================================
# EMAIL CONFIGURATION (untuk development - SMTP)
# =============================================================================

# SMTP Configuration (opsional, untuk development)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_password

# =============================================================================
# EMAIL DOMAIN ENCRYPTION (untuk enkripsi/dekripsi password SMTP domain)
# =============================================================================
# PENTING:
# - Nilai ini HARUS sama dengan kunci yang digunakan saat password domain disimpan.
# - Jika tidak sama, dekripsi akan gagal dengan pesan: "Gagal mendekripsi password domain".
# - Jika Anda lupa kuncinya, set nilai baru di sini lalu UPDATE ulang password domain
#   melalui API/fitur konfigurasi domain agar dienkripsi ulang dengan kunci baru.
# Format: Kunci Fernet base64 (32-byte), contoh: dP8H...ukSo=
# 
# Cara Generate Encryption Key:
# 1. Buka Python shell: python
# 2. Jalankan: from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())
# 3. Copy hasilnya dan paste di bawah ini
# 
# Atau jalankan di terminal:
# python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# 
# Default key untuk Docker (jika tidak ter-set, akan menggunakan key ini):
# nGLXDhCPmhCx5WugGHstyCkT7RY7P066rE_PnN5Hcqk=
EMAIL_DOMAIN_ENCRYPTION_KEY=nGLXDhCPmhCx5WugGHstyCkT7RY7P066rE_PnN5Hcqk=

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health Check Interval
HEALTH_CHECK_INTERVAL=30

# Performance Monitoring
PERFORMANCE_MONITORING=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# Session Configuration
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache Type
CACHE_TYPE=redis

# Cache Default Timeout
CACHE_DEFAULT_TIMEOUT=300

# =============================================================================
# DEVELOPMENT SPECIFIC
# =============================================================================

# Auto Reload
AUTO_RELOAD=true

# Debug Toolbar
DEBUG_TB_ENABLED=true

# Profiler
PROFILER_ENABLED=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Database
# Development: mysql://root:@localhost:3306/KSM_main_test
# Production: mysql://root:password@mysql-prod:3306/KSM_main_test
TEST_DATABASE_URL=mysql://root:@localhost:3306/KSM_main_test

# Test Mode
TESTING=false

# =============================================================================
# DOCKER PRODUCTION CONFIGURATION
# =============================================================================
#
# CATATAN: Variabel berikut HANYA digunakan saat menjalankan Docker (Production)
# Untuk Development lokal, variabel ini tidak diperlukan
#
# =============================================================================

# Docker Network (Production)
DOCKER_NETWORK=KSM-prod-network

# Container Names (Production)
MYSQL_CONTAINER=KSM-mysql-prod
REDIS_CONTAINER=KSM-redis-prod
BACKEND_CONTAINER=KSM-backend-prod
FRONTEND_CONTAINER=KSM-frontend-prod
AGENT_AI_CONTAINER=KSM-agent-ai-prod
ADMINER_CONTAINER=KSM-adminer-prod

# Grafana Admin Password (untuk monitoring di Production)
GRAFANA_PASSWORD=admin

# =============================================================================
# ADMINER DATABASE MANAGEMENT TOOL CONFIGURATION
# =============================================================================
#
# Adminer adalah tool untuk mengelola database MySQL melalui web interface
# Akses Adminer:
# - Langsung: http://localhost:8083
# - Via Nginx: https://report.ptkiansatang.com/adminer/
#
# Login ke Adminer:
# - System: MySQL
# - Server: mysql-prod (untuk Docker) atau localhost (untuk XAMPP)
# - Username: root (atau DB_USER dari konfigurasi)
# - Password: (DB_PASSWORD dari konfigurasi)
# - Database: KSM_main
#
# CATATAN:
# - Adminer hanya tersedia di Docker Production
# - Untuk Development, gunakan phpMyAdmin atau tool database management lainnya
# - Pastikan Adminer hanya diakses oleh admin yang berwenang
#
# =============================================================================

# =============================================================================
# FRONTEND CONFIGURATION (VITE)
# =============================================================================
#
# PENTING: Semua variabel frontend HARUS menggunakan prefix VITE_*
# ================================================================
# Vite hanya akan expose variabel yang dimulai dengan VITE_*
# Variabel ini akan tersedia di browser melalui import.meta.env.VITE_*
#
# Frontend API URL
# Development (Lokal): VITE_APP_API_URL=http://localhost:8000
# Production (Docker): VITE_APP_API_URL=http://localhost:8001
VITE_APP_API_URL=http://localhost:8000

# Frontend Environment
# Development: VITE_APP_ENVIRONMENT=development
# Production: VITE_APP_ENVIRONMENT=production
VITE_APP_ENVIRONMENT=development

# Frontend API Key (opsional)
VITE_APP_API_KEY=default-key

# Frontend Debug Mode
VITE_APP_DEBUG=false

# =============================================================================
# FRONTEND LEGACY (CRA - untuk backward compatibility)
# =============================================================================
#
# Frontend API URL (untuk Docker Production - CRA)
# Hanya digunakan saat build frontend CRA di Docker
REACT_APP_API_URL=https://report.ptkiansatang.com/api
REACT_APP_ENVIRONMENT=production

# Redis Password (opsional, untuk Production)
# REDIS_PASSWORD=your_redis_password_here

# =============================================================================
# PORT CONFIGURATION
# =============================================================================

# Service Ports
BACKEND_PORT=8000
FRONTEND_PORT=3000
AGENT_AI_PORT=5000
MYSQL_PORT=3306
REDIS_PORT=6379
NGINX_PORT=80

# Development Tools Ports
PHPMYADMIN_PORT=8080
REDIS_COMMANDER_PORT=8081
ADMINER_PORT=8083

# =============================================================================
# VOLUME CONFIGURATION
# =============================================================================

# Volume Names
MYSQL_VOLUME=mysql_dev_data
REDIS_VOLUME=redis_dev_data
BACKEND_LOGS_VOLUME=KSM_backend_dev_logs
# BACKEND_CHROMADB_VOLUME=KSM_backend_dev_chromadb  # Removed: using Qdrant instead
BACKEND_RAG_DOCUMENTS_VOLUME=KSM_backend_dev_rag_documents
AGENT_AI_LOGS_VOLUME=agent_ai_dev_logs
# AGENT_AI_CHROMADB_VOLUME=agent_ai_dev_chromadb  # Removed: using Qdrant instead